# SafeDeal

## 概要

これまで世の中は BtoC から CtoC へと時代が変化してきました。Web3 によってその流れは変わり、中央集権を必要としない CtoC の新しい世界が見えてきています。

これからの CtoC では企業が担保してきた安全・安心をスマートコントラクトなどの仕組みによって担保をすることでトラストレスでスムーズな世界を創造することが可能です。

今回開発した Safe Deal では数ある CtoC 間取引の中でも多くのコミュニケーションやお互いの理解が必要な領域に対する 1 つのソリューションとなります。

CtoC 間の取引で不安に感じることは仕事を依頼する側と受ける側でそれぞれ異なります。仕事を依頼する側は実際の作業者のスキルやこれまでの実績を正確に推しはかることができません。また作業を受ける側はしっかりと報酬が支払われるのか信頼できる相手なのかを気にします。

これまでの世界では間に企業が入ることによって身元の担保や報酬の受け渡しを補償していました。我々が開発した Safe Deal はその企業が補っていた役割を Web3 のサービスで実現するものになります。

## アーキテクチャ

![safe-deal-architector](/docs/image/safe-deal-architector.png)

今回用いた技術を上の図に載せています。時間の関係やスキル的な問題で全てを分散化したような形にはできていませんが、Web3 の世界において個人に値する Wallet を中心にできるだけ分散する形で対応をしています。いくつかのサービスの利用例を挙げます。

- Safe Protocol Kit
  - マルチシグのコントラクトウォレットの作成に用いています。
  - 報酬が支払われることを取引開始時点で依頼者からデポジットすることで担保します。
- Push Protocol
  - ウォレットアドレスをベースにしたプッシュ通知とチャットのサービスです。
  - プッシュ通知は作業等で何か変更などがあった場合に利用しています。
  - チャットはクライアントとワーカーの日々のコミュニケーションに用います。
- Huddle01
  - Zoom のようなオンライン会議が行えるサービスです。
  - テキストだけのコミュニケーションよりも互いの意思疎通をスムーズに行うために利用します。
  - ウォレット認証をすることでトークン認証機能を用いることも可能ですがトークン認証がメインネットのみの対応となるため、今回はトークン認証は利用していません。
- ThirdWeb
  - NFT のコントラクト生成、ウォレット認証に用いています。
- Database
  - 一部の情報で変更が必要なものなどを管理するために利用します。

## 対応しているユースケース

Safe Deal では上記のアーキテクチャーを用いて中央集権で実現していた安全性や安心を実現しています。報酬の支払いと個人（ウォレット）の評価に特化しているためどのような取引にも組み込むことが可能です。

### デモ

簡単なデモをお見せします。

まず、クライアントもワーカーもそれぞれウォレット認証を用いてログインします。ログイン時には両者の区別は特になくどちらでも Deal を作成することが可能です。

今回のでもではわかりやすいように 2 つの画面でそれぞれクライアントの立場、ワーカーの立場で操作を行います。

まず、クライアントが案件を登録するところから始まります。情報として入力できるのはタイトルや説明、備考、期限、報酬などの情報になります。報酬は今回は暫定的に ETH にしていますが、手数料などを考慮すると Polygon などガス代が安いチェーンを単純に採用するのも良いとは思っています。

クライアンが案件の登録を完了すると案件一覧画面で各案件の閲覧が可能になります。

ワーカーは案件一覧の中から自身が興味のある案件をピックし詳細の確認が行えます。

また、その案件をこなしたいと思ったらクライアントへ連絡が可能です。

連絡方法はチャットとオンライン会議が可能なため、コミュニケーションで困ることはありません。

お互いに十分なコミュニケーションを取り、互いの実績を SBT で確認した後にはクライアントからワーカーに対して仕事を依頼します。

依頼するタイミングでクライアントは報酬を Safe のマルチシグウォレットアカウントへデポジットします。このマルチシグは 2of3 の構造でクライアント、ワーカー、SafeDeal の 3 つのアドレスで構成されます。基本的にはクライアントとワーカーの 2 者の合意でトランザクションが実行されますが万が一の時に救済が行えるように Safe Deal のアドレスも併せて指定しています。

依頼を受けた作業者は実際に作業に取り掛かります。その間に引き続きチャットやオンライン通話を利用することが可能です。

作業が完了すると作業者はクライアントに対して作業の検証申請を行います。またこのタイミングで作業者はマルチシグウォレットに対しても資金の引き出しの提案 TX を送ります。

クライアントは作業者からの通知を受けて作業内容の検修を行います。検修の結果問題ない場合はクライアントは検証を承認します。承認するタイミングでマルチシグウォレットアカウントに格納されていたデポジットの金額が作業者へと支払われます。

また実績してクライアント側の案件情報が刻まれた SBT も送付が行われます。この SBT が作業者にとっては実績の証明となりまたスキルを証明するものにもなります。

以上のように取引の一覧の流れに Safe Deal を組み込むことで安心安全な取引を行うことができます。
